DE Cloud computing; Task analysis; Resource management; Edge computing;
   Computational modeling; Delays; Energy consumption; IoT-fog-cloud; time
   requirement; resource sharing; mobility; contract establishment
ID ALLOCATION; ARCHITECTURE; ALGORITHM; SYSTEMS
AB Fog computing as an extension of the cloud based infrastructure, provides a better computing platform than cloud computing for mobile computing, Internet of Things, etc. One of the problems is how to make full use of the resources of the fog so that more requests of applications can be executed on the edge, reducing the pressure on the network and ensuring the time requirement of tasks. The high mobility of fog nodes also has a great impact on the task completion time and user satisfaction. Thus, a general IoT-Fog-Cloud computing architecture with a contract-based resource sharing mechanism is proposed in this paper. The contract establishment problem of resource sharing mechanism among fog clusters is modeled as a sealed-bid bilateral auction in order to take full advantage of the fog resources and ensure that more tasks could be executed on the fog. Then, we propose a scheduling method based on functional domain construction to mitigate the influence of mobility of fog nodes. It includes the selection of critical fog nodes and the construction of fog function domains based on spectral clustering. The selection of critical fog nodes is used to find the best fog nodes in each fog cluster with respect to the betweenness centrality, computing performance and communication delay to the IoT nodes. The critical nodes are responsible for building the functional domains of the remaining fog nodes in each fog cluster. Functional domain construction is used to determine the set of fog nodes contained in the corresponding functional domain. Finally, through extensive simulation experiments, the performance difference between the proposed method and the other four methods in terms of average service time, average utilization of fog nodes, success rate of tasks, average WLAN delay and the average cost of successful tasks are evaluated. Results show that our method generally outperforms the other four methods in these metrics.