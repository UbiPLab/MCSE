AB This paper addresses the continuous discrete-time nonlinear filtering problem for stochastic dynamical systems using the feedback particle filter (FPF). The FPF updates each particle using feedback from the measurements, where the gain function that controls the particles is the solution of a Poisson equation. The main difficulty in the FPF is to approximate this solution using the particles that approximate the probability distribution. We develop a novel Galerkin-based method inspired by high-dimensional data-analysis techniques. Based on the time evolution of the particle cloud, we determine basis functions for the gain function and compute values of it for each individual particle. Our method is completely adapted to the recorded history of the particles and the update of the particles do not require further intermediate approximations or assumptions. We provide an extensive numerical evaluation of the proposed approach and show that it compares favorably compared to baseline FPF and particle filters based on the importance-sampling paradigm.